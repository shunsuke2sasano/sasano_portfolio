{% extends "base.html" %}
{% load static %}
{% load custom_filters %}

{% block title %}{{ profile.name|default:profile.user.name }} ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«{% endblock %}

{% block content %}
    <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®è¡¨ç¤º -->
    {% if profile.profile_image %}
        <img src="{{ profile.profile_image.url }}" alt="Profile Image" width="100">
    {% elif profile.user.profile_image and profile.user.profile_image.name != "profile_images/default_profile_image.jpg" %}
        <img src="{{ profile.user.profile_image.url }}" alt="Profile Image" width="100">
    {% else %}
        <img src="/media/profile_images/default_profile_image.png" alt="Profile Image" width="100">
    {% endif %}

    <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®è¡¨ç¤º -->
    <p>åå‰: {{ profile.name|default:profile.user.name|default:"æœªè¨­å®š" }}</p>
    <p>ãµã‚ŠãŒãª: {{ profile.furigana|default:"æœªè¨­å®š" }}</p>
    <p>æ€§åˆ¥: {{ profile.get_gender_display|default:"æœªè¨­å®š" }}</p>
    <p>å¹´é½¢: {{ profile.age|default:"æœªè¨­å®š" }}</p>
    <p>è‡ªå·±ç´¹ä»‹: {{ profile.bio|default:"æœªè¨­å®š" }}</p>
    <p>ã„ã„ã­æ•°: {{ profile.likes_count }}</p>
    <button class="like-btn" data-user-id="{{ profile.user.id }}">
        ğŸ‘ {{ profile.likes_count }}
    </button>

    <script>
        const likeToggleUrl = "{% url 'accounts:like_toggle' profile.user.id %}";
        const csrfToken = "{{ csrf_token|safe }}";
    </script>

    <script src="{% static 'accounts/like_toggle.js' %}"></script>
{% endblock %}

